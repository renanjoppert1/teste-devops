(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bf6dd47","chunk-55971483"],{"04f8":function(t,e,a){"use strict";var i=a("d3fc"),n=a.n(i);n.a},"0b21":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{background:"white",padding:"5px 10px","box-sizing":"border-box"}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("h1",{staticClass:"pageTitle"},[t._v(t._s(this.prefix)+": "+t._s(this.name))])]),a("el-col",{staticClass:"text-right",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editData()}}},[t._v("Editar "+t._s(this.prefix))]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteData()}}},[t._v("Excluir")])],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",t._l(this.dataModuleFields,(function(e){return a("el-col",{key:e.field_id,staticClass:"data",attrs:{span:8}},[a("label",[t._v(t._s(e.field_label))]),"switch"==e.type_field?a("p",{staticClass:"data-value"},[0==t.dataModule[e.field_table_name]?a("span",[t._v("Não")]):t._e(),1==t.dataModule[e.field_table_name]?a("span",[t._v("Sim")]):t._e()]):t._e(),"switch"!=e.type_field?a("p",{staticClass:"data-value"},[a("span",[t._v(t._s(t.dataModule[e.field_table_name]))])]):t._e()])})),1)],1),a("UpdateModuleData",{attrs:{dataID:this.dataID,show:this.drawerEditShow},on:{done:function(e){return t.doneUpdate()}}})],1)},n=[],l=a("9dec"),o={name:"DealView",head:{title:{inner:"",complement:"GuiaSales"}},data:function(){return{pageTitle:"",dataID:-1,dataModule:[],dataModuleFields:[],prefix:"Oportunidade",drawerEditShow:!1}},components:{UpdateModuleData:l["default"]},mounted:function(){this.dataID=this.$route.params.id,this.getDataObject(),this.getFields()},methods:{doneUpdate:function(){this.drawerEditShow=!1,this.getDataObject(),this.getFields()},editData:function(){this.drawerEditShow=!this.drawerEditShow},getFields:function(){var t=this;this.$http.get("/fields/deals").then((function(e){t.dataModuleFields=e.data})).catch((function(t){console.log(t.response)}))},getDataObject:function(){var t=this;this.$http.get("/module/deals/"+this.dataID).then((function(e){t.dataModule=e.data}))},deleteData:function(){var t=this;this.$http.delete("/module/deals/"+this.dataID).then((function(e){t.$notify.success({title:"Sucesso"}),t.$router.push({name:"Deals_List"})})).catch((function(e){t.$notify.error({title:"Houve um erro a excluir"})}))}},computed:{name:function(){return this.dataModule.cf_deal_name}}},d=o,r=(a("f18a"),a("2877")),s=Object(r["a"])(d,i,n,!1,null,null,null);e["default"]=s.exports},"110e":function(t,e,a){},"159b":function(t,e,a){var i=a("da84"),n=a("fdbc"),l=a("17c2"),o=a("9112");for(var d in n){var r=i[d],s=r&&r.prototype;if(s&&s.forEach!==l)try{o(s,"forEach",l)}catch(u){s.forEach=l}}},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,n=a("a640"),l=a("ae40"),o=n("forEach"),d=l("forEach");t.exports=o&&d?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var i=a("23e7"),n=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"65f0":function(t,e,a){var i=a("861d"),n=a("e8b5"),l=a("b622"),o=l("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"9dec":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{attrs:{title:"Edição da Oportunidade",visible:t.show,direction:"rtl","before-close":t.handleClose,size:"40%"},on:{"update:visible":function(e){t.show=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],staticStyle:{padding:"0px 20px","box-sizing":"border-box"}},[a("ul",{attrs:{id:"DataModuleUpdate"}},t._l(t.dataModule.fields,(function(e){return a("li",{key:e.field_id},[a("span",{staticClass:"label"},[t._v(t._s(e.field_label))]),a("span",{staticClass:"field"},[t.textField()?a("el-input",{model:{value:t.dataModule.form[e.field_table_name],callback:function(a){t.$set(t.dataModule.form,e.field_table_name,a)},expression:"dataModule.form[field.field_table_name]"}}):t._e(),t.textField(e.type_field)?a("el-input",{model:{value:t.dataModule.form[e.field_table_name],callback:function(a){t.$set(t.dataModule.form,e.field_table_name,a)},expression:"dataModule.form[field.field_table_name]"}}):t._e(),t.switchField(e.type_field)?a("el-switch",{model:{value:t.dataModule.form[e.field_table_name],callback:function(a){t.$set(t.dataModule.form,e.field_table_name,a)},expression:"dataModule.form[field.field_table_name]"}}):t._e(),t.dateField(e.type_field)?a("el-date-picker",{attrs:{type:"date",format:"dd/MM/yyyy"},model:{value:t.dataModule.form[e.field_table_name],callback:function(a){t.$set(t.dataModule.form,e.field_table_name,a)},expression:"dataModule.form[field.field_table_name]"}}):t._e(),t.selectField(e.type_field)?a("el-select",{attrs:{width:"100%",clearable:"",placeholder:"Selecione"},model:{value:t.dataModule.form[e.field_table_name],callback:function(a){t.$set(t.dataModule.form,e.field_table_name,a)},expression:"dataModule.form[field.field_table_name]"}},t._l(t.dataModule.fieldsOptions[e.field_table_name],(function(t){return a("el-option",{key:t.dropdown_option_value,attrs:{label:t.dropdown_option_value,value:t.dropdown_option_value}})})),1):t._e()],1)])})),0),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveData()}}},[t._v("Atualizar Dados")])],1)])],1)},n=[],l=(a("4160"),a("159b"),{name:"DealUpdate",props:{show:{default:!1}},data:function(){return{dataID:0,loading:!1,dataModule:{originalData:[],fields:[],form:{},fieldsOptions:{}}}},methods:{textField:function(t){return"text"===t},switchField:function(t){return"switch"===t},dateField:function(t){return"date"===t},selectField:function(t){return"dropdown"===t},saveData:function(){var t=this,e=this.dataModule.fields,a=!1;e.forEach((function(e){if(t.dataModule.form[e.field_table_name]!=t.dataModule.originalData[e.field_table_name])return a=!0,!1})),0==a?(this.dataModule.form={},this.$emit("done")):this.XHRSaveDataModule()},XHRSaveDataModule:function(){var t=this;this.loading=!0;var e=this.dataModule.form;this.$http.put("/module/deals/"+this.dataID,e).then((function(e){t.loading=!1,t.$notify.success({title:"Sucesso"}),t.$emit("done")})).catch((function(e){t.loading=!1,t.$notify.error({title:"Erro na soliciatação"})}))},handleClose:function(t){var e=this;this.$confirm("Deseja sair da tela de atualização?").then((function(a){e.$emit("done"),t()})).catch((function(t){}))},getOldDataFromDataModule:function(t){var e=this;this.$http.get("/module/deals/"+t).then((function(t){e.dataModule.originalData=t.data}))},getFieldsFromDataModule:function(){var t=this;this.$http.get("/fields/deals").then((function(e){t.dataModule.fields=e.data,e.data.forEach((function(e){t.$set(t.dataModule.form,e.field_table_name,t.dataModule.originalData[e.field_table_name])}))}))},mountFormUpdate:function(){var t=this;this.$http.get("/module/deals/"+this.dataID).then((function(e){t.dataModule.originalData=e.data,t.$http.get("/fields/deals").then((function(e){t.dataModule.fields=e.data,e.data.forEach((function(e){"dropdown"===e.type_field&&t.$http.get("/fields/dropdown-values/"+e.field_id).then((function(a){t.$set(t.dataModule.fieldsOptions,e.field_table_name,a.data)})),t.$set(t.dataModule.form,e.field_table_name,t.dataModule.originalData[e.field_table_name])}))}))}))}},watch:{show:function(t,e){this.dataID=this.$route.params.id,this.mountFormUpdate()}}}),o=l,d=(a("04f8"),a("2877")),r=Object(d["a"])(o,i,n,!1,null,null,null);e["default"]=r.exports},a640:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var i=a("83ab"),n=a("d039"),l=a("5135"),o=Object.defineProperty,d={},r=function(t){throw t};t.exports=function(t,e){if(l(d,t))return d[t];e||(e={});var a=[][t],s=!!l(e,"ACCESSORS")&&e.ACCESSORS,u=l(e,0)?e[0]:r,c=l(e,1)?e[1]:void 0;return d[t]=!!a&&!n((function(){if(s&&!i)return!0;var t={length:-1};s?o(t,1,{enumerable:!0,get:r}):t[1]=1,a.call(t,u,c)}))}},b727:function(t,e,a){var i=a("0366"),n=a("44ad"),l=a("7b0b"),o=a("50c4"),d=a("65f0"),r=[].push,s=function(t){var e=1==t,a=2==t,s=3==t,u=4==t,c=6==t,f=5==t||c;return function(h,p,m,_){for(var b,v,M=l(h),g=n(M),w=i(p,m,3),y=o(g.length),D=0,x=_||d,S=e?x(h,y):a?x(h,0):void 0;y>D;D++)if((f||D in g)&&(b=g[D],v=w(b,D,M),t))if(e)S[D]=v;else if(v)switch(t){case 3:return!0;case 5:return b;case 6:return D;case 2:r.call(S,b)}else if(u)return!1;return c?-1:s||u?u:S}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},d3fc:function(t,e,a){},e8b5:function(t,e,a){var i=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},f18a:function(t,e,a){"use strict";var i=a("110e"),n=a.n(i);n.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-7bf6dd47.3c3c2bf9.js.map