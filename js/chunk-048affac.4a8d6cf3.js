(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-048affac"],{"014e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-drawer",{attrs:{title:"Editar Lead",visible:e.drawerShow,direction:e.direction,"before-close":e.handleClose,size:"50%"},on:{"update:visible":function(t){e.drawerShow=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],staticStyle:{padding:"0px 20px","box-sizing":"border-box"}},[a("ul",{attrs:{id:"leadDataUpdate"}},e._l(this.leadData.fields,(function(t){return a("li",{key:t.field_id},[a("span",{staticClass:"label"},[e._v(e._s(t.field_label))]),a("span",{staticClass:"field"},[e.textField(t.type_field)?a("el-input",{model:{value:e.leadData.form[t.field_table_name],callback:function(a){e.$set(e.leadData.form,t.field_table_name,a)},expression:"leadData.form[field.field_table_name]"}}):e._e(),e.switchField(t.type_field)?a("el-switch",{model:{value:e.leadData.form[t.field_table_name],callback:function(a){e.$set(e.leadData.form,t.field_table_name,a)},expression:"leadData.form[field.field_table_name]"}}):e._e(),e.dateField(t.type_field)?a("el-date-picker",{attrs:{type:"date",format:"dd/MM/yyyy"},model:{value:e.leadData.form[t.field_table_name],callback:function(a){e.$set(e.leadData.form,t.field_table_name,a)},expression:"leadData.form[field.field_table_name]"}}):e._e(),e.selectField(t.type_field)?a("el-select",{attrs:{width:"100%",clearable:"",placeholder:"Selecione"},model:{value:e.leadData.form[t.field_table_name],callback:function(a){e.$set(e.leadData.form,t.field_table_name,a)},expression:"leadData.form[field.field_table_name]"}},e._l(e.leadData.fieldsOptions[t.field_table_name],(function(e){return a("el-option",{key:e.dropdown_option_value,attrs:{label:e.dropdown_option_value,value:e.dropdown_option_value}})})),1):e._e()],1)])})),0),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveLead()}}},[e._v("Atualizar Dados")])],1)])],1)},n=[],r=(a("4160"),a("159b"),{name:"LeadUpdate",data:function(){return{loading:!1,direction:"rtl",leadData:{data:[],fields:[],form:{},fieldsOptions:{}}}},props:{drawerShow:{default:!1},leadID:{default:0}},methods:{textField:function(e){return"text"===e},switchField:function(e){return"switch"===e},dateField:function(e){return"date"===e},selectField:function(e){return"dropdown"===e},saveLead:function(){var e=this.leadData.fields,t=this.leadData.form,a=this.leadData.data,i=!1;e.forEach((function(e){if(t[e.field_table_name]!=a[e.field_table_name])return i=!0,!1})),0==i?(this.leadData.form={},this.$emit("done")):this.XHRSaveLead()},XHRSaveLead:function(){var e=this;this.loading=!0;var t=this.leadData.form;this.$http.put("/leads/"+this.leadID,t).then((function(t){e.loading=!1,e.$notify.success({title:"Sucesso"}),e.$emit("done"),e.$emit("reload")})).catch((function(t){e.loading=!1,e.$notify.error({title:"Erro na soliciatação"})}))},handleClose:function(e){var t=this;this.$confirm("Você tem certeza que não deseja atualizar este lead?").then((function(a){t.$emit("done"),e(a)})).catch((function(e){}))},getOldDataFromLead:function(){var e=this;this.$http.get("/leads/"+this.leadID).then((function(t){e.leadData.data=t.data,e.$http.get("/fields/leads").then((function(t){e.leadData.fields=t.data;var a=t.data;a.forEach((function(t){"dropdown"===t.type_field&&e.$http.get("/fields/dropdown-values/"+t.field_id).then((function(a){e.$set(e.leadData.fieldsOptions,t.field_table_name,a.data)})),e.$set(e.leadData.form,t.field_table_name,e.leadData.data[t.field_table_name])}))})).catch((function(t){e.$notify.error({title:"Erro nos Campos",message:t.response.data})}))})).catch((function(t){e.$notify.error({title:"Erro",message:t.response.data})}))}},watch:{drawerShow:function(e,t){1==e&&this.getOldDataFromLead()}}}),l=r,o=(a("7f11"),a("2877")),d=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=d.exports},"159b":function(e,t,a){var i=a("da84"),n=a("fdbc"),r=a("17c2"),l=a("9112");for(var o in n){var d=i[o],s=d&&d.prototype;if(s&&s.forEach!==r)try{l(s,"forEach",r)}catch(f){s.forEach=r}}},"17c2":function(e,t,a){"use strict";var i=a("b727").forEach,n=a("a640"),r=a("ae40"),l=n("forEach"),o=r("forEach");e.exports=l&&o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,a){"use strict";var i=a("23e7"),n=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"65f0":function(e,t,a){var i=a("861d"),n=a("e8b5"),r=a("b622"),l=r("species");e.exports=function(e,t){var a;return n(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[l],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},"7f11":function(e,t,a){"use strict";var i=a("e8a3"),n=a.n(i);n.a},a640:function(e,t,a){"use strict";var i=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&i((function(){a.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,a){var i=a("83ab"),n=a("d039"),r=a("5135"),l=Object.defineProperty,o={},d=function(e){throw e};e.exports=function(e,t){if(r(o,e))return o[e];t||(t={});var a=[][e],s=!!r(t,"ACCESSORS")&&t.ACCESSORS,f=r(t,0)?t[0]:d,c=r(t,1)?t[1]:void 0;return o[e]=!!a&&!n((function(){if(s&&!i)return!0;var e={length:-1};s?l(e,1,{enumerable:!0,get:d}):e[1]=1,a.call(e,f,c)}))}},b727:function(e,t,a){var i=a("0366"),n=a("44ad"),r=a("7b0b"),l=a("50c4"),o=a("65f0"),d=[].push,s=function(e){var t=1==e,a=2==e,s=3==e,f=4==e,c=6==e,u=5==e||c;return function(h,p,m,_){for(var v,b,D=r(h),y=n(D),L=i(p,m,3),S=l(y.length),w=0,g=_||o,x=t?g(h,S):a?g(h,0):void 0;S>w;w++)if((u||w in y)&&(v=y[w],b=L(v,w,D),e))if(t)x[w]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:d.call(x,v)}else if(f)return!1;return c?-1:s||f?f:x}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},e8a3:function(e,t,a){},e8b5:function(e,t,a){var i=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-048affac.4a8d6cf3.js.map