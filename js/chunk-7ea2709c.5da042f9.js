(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ea2709c"],{"73ce":function(e,t,o){"use strict";var s=o("8115"),l=o.n(s);l.a},8115:function(e,t,o){},b998:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"cb"}},[o("el-row",[o("el-col",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[o("h1",{staticClass:"pageTitle"},[e._v(e._s(this.pageTitle))])]),o("el-col",{staticClass:"text-right",attrs:{xs:24,sm:24,md:4,lg:4,xl:4}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showNewWorkflow()}}},[e._v("Novo Fluxo")])],1),o("el-col",{attrs:{id:"listData",xs:24,sm:24,md:24,lg:24,xl:24}},[o("el-row",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{on:{change:function(o){return e.toggleActive(t.row.id,e.tableData[t.$index].is_active)}},model:{value:e.tableData[t.$index].is_active,callback:function(o){e.$set(e.tableData[t.$index],"is_active",o)},expression:"tableData[scope.$index].is_active"}})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"Nome do Fluxo"}}),o("el-table-column",{attrs:{prop:"type",label:"Tipo"}}),o("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(o){return e.editWorkflow(t.row.id)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){return e.deleteWorkflow(t.row.id)}}})]}}])})],1)],1)],1)],1),o("DrawerNewWorkflow",{attrs:{show:e.visible_new},on:{done:function(t){return e.doneNewWorkflow()}}})],1)},l=[],a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-drawer",{attrs:{title:"Novo Fluxo de Trabalho",visible:e.show,direction:"rtl",size:"35%","before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[o("div",{staticClass:"drawer-content"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"Nome"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"Em que tipos de dados será executado?"}},[o("el-select",{model:{value:e.form.view,callback:function(t){e.$set(e.form,"view",t)},expression:"form.view"}},e._l(e.form.viewOptions,(function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.newWorkflow()}}},[e._v("Novo Fluxo")])],1)],1)])],1)},i=[],n=(o("b0c0"),{name:"NewWorkflow",data:function(){return{visible:!1,form:{name:"",view:"",viewOptions:["leads","accounts","deals","contacts"]}}},props:["show"],methods:{handleClose:function(e){var t=this;this.$confirm("Você tem certeza que deseja fechar esta janela?").then((function(o){t.$emit("done"),e(o)})).catch({})},clearAllFields:function(){this.form.name="",this.form.view=""},validateFields:function(){return""!=this.form.label&&""!=this.form.action&&""!=this.form.view||(this.$message.error("Você deve preencher todos os campos"),!1)},newWorkflow:function(){var e=this,t={label:this.form.name,view:this.form.view};this.$http.post("/workflows",t).then((function(t){"201"==t.status&&(e.$emit("done"),e.clearAllFields(),e.visible=!1,e.$router.push({name:"Settings_Custom_Workflows_View",params:{id:t.data.id}}),e.$message({message:"Fluxo criado com sucesso",type:"success"}),e.listWorkflows())}))}}}),r=n,c=o("2877"),u=Object(c["a"])(r,a,i,!1,null,null,null),f=u.exports,m={name:"SettingsWorkflows",components:{DrawerNewWorkflow:f},data:function(){return{visible_new:!1,pageTitle:"Fluxos de Trabalho",tableData:[]}},head:{title:{inner:"Configurações | Fluxos de Trabalho",complement:"GuiaSales"}},methods:{doneNewWorkflow:function(){this.visible_new=!1,this.listWorkflows()},showNewWorkflow:function(){this.visible_new=!0},toggleActive:function(e,t){var o=this,s={is_active:t};this.$http.post("/workflows/change-active/"+e,s).then((function(e){400!=e.status&&o.$message({message:"Fluxo alterado com sucesso",type:"success"})})).catch((function(e){o.$message.error("Oops, houve um erro ao alterar o campo ->"+e.response.data),o.listWorkflows()}))},editWorkflow:function(e){this.$router.push({name:"Settings_Custom_Workflows_View",params:{id:e}})},deleteWorkflow:function(e){var t=this;this.$http.delete("/workflows/"+e).then((function(e){"200"==e.status&&(t.$message({message:"Fluxo apagado com sucesso",type:"success"}),t.listWorkflows())})).catch((function(e){t.message.error("Houve um erro"+e.response.data)}))},listWorkflows:function(){var e=this;this.$http.get("/workflows").then((function(t){"200"==t.status&&(e.tableData=t.data)}))}},mounted:function(){this.listWorkflows()}},d=m,w=(o("73ce"),Object(c["a"])(d,s,l,!1,null,null,null));t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-7ea2709c.5da042f9.js.map