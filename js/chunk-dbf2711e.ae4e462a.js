(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbf2711e"],{"159b":function(e,t,a){var n=a("da84"),i=a("fdbc"),l=a("17c2"),r=a("9112");for(var s in i){var o=n[s],c=o&&o.prototype;if(c&&c.forEach!==l)try{r(c,"forEach",l)}catch(u){c.forEach=l}}},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,i=a("a640"),l=a("ae40"),r=i("forEach"),s=l("forEach");e.exports=r&&s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},3666:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("h1",{staticClass:"pageTitle"},[e._v(e._s(this.pageTitle))])]),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"this.loading"}],attrs:{id:"listData",xs:24,sm:24,md:18,lg:18,xl:18}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-popconfirm",{attrs:{confirmButtonText:"Excluir",cancelButtonText:"Cancelar",title:"Você tem certeza que deseja excluir os leads selecionados?"},on:{onConfirm:function(t){return e.deleteLeads()}}},[a("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("Excluir")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableColumns,(function(e){return a("el-table-column",{key:e.field_label,attrs:{prop:e.field_table_name,label:e.field_label}})})),a("el-table-column",{attrs:{width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:e.linkToView(t.row.lead_id)}},[a("el-button",{attrs:{size:"small"}},[a("i",{staticClass:"el-icon-right"})])],1)]}}])})],2)],1)],1),a("el-row",{attrs:{id:"paginationList"}},[this.pagination()?a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3,"page-size":this.pageSize,"current-page":this.currentPage}})],1):e._e()],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:6,lg:6,xl:6}},[a("FieldsBar",{attrs:{module:"leads"},on:{listColumns:e.alterColumns}})],1)],1)],1)},i=[],l=(a("4160"),a("4fad"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.openDrawer()}}},[e._v("Alterar Colunas")]),a("el-drawer",{attrs:{title:"Edição de Colunas",visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticStyle:{padding:"0px 20px"}},[a("p",[e._v("Selecione os campos que deseja mostrar na listagem:")]),e._l(this.fields,(function(t){return a("p",{key:t.field_id},[a("el-checkbox",{model:{value:e.fieldsSelected[t.field_table_name],callback:function(a){e.$set(e.fieldsSelected,t.field_table_name,a)},expression:"fieldsSelected[field.field_table_name]"}},[e._v(e._s(t.field_label))])],1)})),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.alterColumns()}}},[e._v("Alterar Tabela")])],2)])],1)}),r=[],s={data:function(){return{drawer:!1,fieldsSelected:{},direction:"rtl",fields:[]}},props:["module"],methods:{alterColumns:function(){var e=Object.entries(this.fieldsSelected),t=!1;e.forEach((function(e){if(1==e[1])return t=!0,!1})),1==t?(this.$emit("listColumns",this.fieldsSelected),this.fieldsSelected={},this.fields=[],this.drawer=!1):this.$notify.error({title:"Erro",message:"Selecione ao menos 1 campo"})},openDrawer:function(){var e=this;this.$http.get("fields/"+this.module).then((function(t){e.fields=t.data,e.fields.forEach((function(t){e.$set(e.fieldsSelected,t.field_table_name,!1)}))})),this.drawer=!0},handleClose:function(e){var t=this;this.$confirm("Você tem certeza que quer fechar a edição de campos?").then((function(a){t.drawer=!1,e()})).catch((function(e){}))}}},o=s,c=(a("65b1"),a("2877")),u=Object(c["a"])(o,l,r,!1,null,"2a78f003",null),d=u.exports,f={name:"Leads",components:{FieldsBar:d},data:function(){return{pageSize:0,pages:0,currentPage:0,countTotalLeads:0,pageTitle:"Leads",loading:!0,tableData:[],multipleSelection:[],columns:"",tableColumns:[{field_label:"Nome",field_table_name:"first_name"},{field_label:"Sobrenome",field_table_name:"last_name"},{field_label:"E-mail",field_table_name:"email"},{field_label:"Telefone",field_table_name:"work_number"}]}},head:{title:{inner:"Leads",complement:"GuiaSales"}},methods:{alterColumns:function(e){this.columns=e,this.getLeads()},renderTable:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a="fields/leads";0!=t&&(a+="?cols="+t),this.$http.get(a).then((function(t){e.tableColumns=t.data}))},getLeads:function(){var e=this,t="/leads/view";if(""!=this.columns){var a=Object.entries(this.columns),n="",i=0;a.forEach((function(e){1==e[1]&&(0!=i&&(n+=","),n+=e[0],i++)})),0!=i&&(n+=","),n+="lead_id",t+="?fields="+n,this.renderTable(n)}else this.renderTable();this.$http.get(t).then((function(t){e.loading=!1,200==t.status&&(e.tableData=t.data.data,e.pages=t.data.meta.total_pages,e.currentPage=t.data.meta.page,e.pageSize=t.data.meta.per_page,e.countTotalLeads=t.data.meta.total_leads)})).catch((function(t){e.loading=!1,console.log(t.response)}))},deleteLeads:function(){var e=this;if(0==this.multipleSelection.length)return this.$message({message:"Selecione ao menos 1 registro",type:"warning"}),!1;this.$http.post("/leads/bulk",this.multipleSelection).then((function(t){"200"==t.status&&(e.getLeads(),e.$notify({title:"Sucesso",message:t.data.msg,type:"success"}))}))},linkToView:function(e){return{name:"Lead_View",params:{id:e}}},handleSelectionChange:function(e){this.multipleSelection=e},pagination:function(){return this.pages>1}},mounted:function(){this.getLeads()}},h=f,m=(a("9fcd"),Object(c["a"])(h,n,i,!1,null,null,null));t["default"]=m.exports},4160:function(e,t,a){"use strict";var n=a("23e7"),i=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4fad":function(e,t,a){var n=a("23e7"),i=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},"5d26":function(e,t,a){},"65b1":function(e,t,a){"use strict";var n=a("5d26"),i=a.n(n);i.a},"65f0":function(e,t,a){var n=a("861d"),i=a("e8b5"),l=a("b622"),r=l("species");e.exports=function(e,t){var a;return i(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},"6f53":function(e,t,a){var n=a("83ab"),i=a("df75"),l=a("fc6a"),r=a("d1e7").f,s=function(e){return function(t){var a,s=l(t),o=i(s),c=o.length,u=0,d=[];while(c>u)a=o[u++],n&&!r.call(s,a)||d.push(e?[a,s[a]]:s[a]);return d}};e.exports={entries:s(!0),values:s(!1)}},"9fcd":function(e,t,a){"use strict";var n=a("ef17"),i=a.n(n);i.a},a640:function(e,t,a){"use strict";var n=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&n((function(){a.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,a){var n=a("83ab"),i=a("d039"),l=a("5135"),r=Object.defineProperty,s={},o=function(e){throw e};e.exports=function(e,t){if(l(s,e))return s[e];t||(t={});var a=[][e],c=!!l(t,"ACCESSORS")&&t.ACCESSORS,u=l(t,0)?t[0]:o,d=l(t,1)?t[1]:void 0;return s[e]=!!a&&!i((function(){if(c&&!n)return!0;var e={length:-1};c?r(e,1,{enumerable:!0,get:o}):e[1]=1,a.call(e,u,d)}))}},b727:function(e,t,a){var n=a("0366"),i=a("44ad"),l=a("7b0b"),r=a("50c4"),s=a("65f0"),o=[].push,c=function(e){var t=1==e,a=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d;return function(h,m,p,b){for(var g,v,S=l(h),_=i(S),L=n(m,p,3),w=r(_.length),y=0,C=b||s,x=t?C(h,w):a?C(h,0):void 0;w>y;y++)if((f||y in _)&&(g=_[y],v=L(g,y,S),e))if(t)x[y]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return y;case 2:o.call(x,g)}else if(u)return!1;return d?-1:c||u?u:x}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},e8b5:function(e,t,a){var n=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},ef17:function(e,t,a){},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-dbf2711e.ae4e462a.js.map